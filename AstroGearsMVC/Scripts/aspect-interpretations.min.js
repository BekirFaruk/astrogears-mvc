var AspectInterpretations;(function(n){function r(n,i){t=!0;$.ajaxSetup({cache:!1});var r=$.getJSON("/AspectInterpretations/GetAspectInterpretationListing",{pageNum:n,entriesPerPage:i}).done(function(t){$.each(t[0],function(n,t){var i=$("<tr/>");i.append($("<td/>").html(t.FirstObject+" "+t.AspectName+" "+t.SecondObject));i.append($("<td/>").html(t.Interpretation.replace(/\n/g,"<br>")));i.append($("<td/>").html(!IsNullOrUndefined(t.CitationUrl)&&t.CitationUrl.substring(0,4)==="http"?'<a href="'+t.CitationUrl+'" target="_blank">'+t.CitationUrl+"<\/a>":t.CitationUrl));i.append($("<td/>").append($('<a href="#" onclick="AspectInterpretations.OpenEditForm('+t.AspectInterpretationId+');return false" title="Edit Aspect Interpretation"/>').append('<span class="fa fa-edit"/>').append(" Edit")).append($("<br/>")).append($('<a href="#" onclick="AspectInterpretations.OpenDeleteForm('+t.AspectInterpretationId+');return false" title="Delete Aspect Interpretation"/>').append('<span class="fa fa-remove error"/>').append($('<span class="error"/>').html(" Delete"))));$("#listingBody").append(i)});$("#pageNumber").empty();$("#totalPages").text(t[1]);for(var i=1;i<=parseInt(t[1]);i++)$("#pageNumber").append($(i===n?'<option selected="selected"/>':"<option/>").val(i.toString()).text(i.toString()))}).fail(function(n,t,i){var r=t+", "+i;console.log("Chart Reload failure: "+r);$("#status").html(errorIcon+" Error: Cannot retrieve Aspect Interpretation Listing")});return $.ajaxSetup({cache:!0}),r}function c(){$("#createAspectInterpretationModal").modal("show")}function l(n){$("#editAspectInterpretationModal").modal("show");h(n)}function a(n){$("#deleteAspectInterpretationModal").modal("show");var t=$.getJSON("/AspectInterpretations/GetAspectInterpretationForDelete",{id:n}).done(function(n){$("#deleteAspectInterpretationId").val(n[0].AspectInterpretationId);$("#deleteFirstObject").html(n[0].FirstObject);$("#deleteSecondObject").html(n[0].SecondObject);$("#deleteAspect").html(n[0].AspectName);$("#deleteInterpretation").html(n[0].Interpretation.replace(/\n/g,"<br>"));$("#deleteCitationUrl").html(!IsNullOrUndefined(n[0].CitationUrl)&&n[0].CitationUrl.substring(0,4)==="http"?'<a href="'+n[0].CitationUrl+'" target="_blank">'+n[0].CitationUrl+"<\/a>":n[0].CitationUrl)}).fail(function(n,t,i){var r=t+", "+i;console.log("Delete Load Failure: "+r);$("#status").append($("<div/>").html(errorIcon+" Failed to get delete data.."))})}function f(){$.getJSON("/AspectInterpretations/GetAspectInterpretationTypes").done(function(n){$.each([$("#createAspectInterpretationTypeId1"),$("#createAspectInterpretationTypeId2"),$("#editAspectInterpretationTypeId1"),$("#editAspectInterpretationTypeId2")],function(t,i){$.each(n,function(n,t){i.append($('<option value="'+t.AspectInterpretationTypeId+'"'+(n===0?' selected="selected"':"")+"/>").html(t.AspectInterpretationTypeName))})})}).fail(function(n,t,i){var r=t+", "+i;console.log("Aspect Interepretation Type List failure.: "+r);$("#status").append($("<div/>").html(errorIcon+" Failed to retrieve Aspect Interpretation Types."))})}function e(){$.getJSON("/AspectInterpretations/GetAspectsList").done(function(n){$.each([$("#createAspectId"),$("#editAspectId")],function(t,i){$.each(n,function(n,t){i.append($('<option value="'+t.AspectId+'"'+(n===0?' selected="selected"':"")+"/>").html(t.AspectName))})})}).fail(function(n,t,i){var r=t+", "+i;console.log("Aspect List failure.: "+r);$("#status").append($("<div/>").html(errorIcon+" Failed to retrieve Aspect List Types."))})}function o(){$.getJSON("/AspectInterpretations/GetAnglesList").done(function(n){$.each([$("#createAngle1Id"),$("#createAngle2Id"),$("#editAngle1Id"),$("#editAngle2Id")],function(t,i){$.each(n,function(n,t){i.append($('<option value="'+t.AngleId+'"'+(n===0?' selected="selected"':"")+"/>").html(t.AngleName))})})}).fail(function(n,t,i){var r=t+", "+i;console.log("Aspect List failure.: "+r);$("#status").append($("<div/>").html(errorIcon+" Failed to retrieve Angle List Types."))})}function u(n,t,i,r,u,f,e,o,s,h){if(i){if(o)return t<e?[parseInt(n),parseInt(t),null,parseInt(f),parseInt(e),null]:[parseInt(f),parseInt(e),null,parseInt(n),parseInt(t),null];if(h)return[parseInt(n),parseInt(t),null,parseInt(f),null,parseInt(s)]}else if(u){if(o)return[parseInt(n),null,parseInt(r),parseInt(f),parseInt(e),null];if(h)return r<s?[parseInt(n),null,parseInt(r),parseInt(f),null,parseInt(s)]:[parseInt(f),null,parseInt(s),parseInt(n),null,parseInt(r)]}return null}function s(){$.each([$("#createAspectInterpretationTypeId1"),$("#createAspectInterpretationTypeId2"),$("#createAngle1Id"),$("#createAngle2Id")],function(n,t){t.val([])});$.each([$("#createCelestialObject1"),$("#createCelestialObject1Id"),$("#createCelestialObject1Selected"),$("#createCelestialObject2"),$("#createCelestialObject2Id"),$("#createCelestialObject2Selected"),$("#createInterpretation"),$("#createCitationUrl")],function(n,t){t.val("")});$("#createStatus").empty()}function h(n){var t=$.getJSON("/AspectInterpretations/GetAspectInterpretationForEdit",{id:n}).done(function(t){$("#editAspectInterpretationId").val(n.toString());$("#editAspectInterpretationTypeId1").val(t[0].AspectInterpretationTypeId1);IsNullOrUndefined(t[0].CelestialObjectId1)?IsNullOrUndefined(t[0].AngleId1)||($("#editSelectFirstChartAngle").attr("checked","checked"),$("#editAngle1Id").val(t[0].AngleId1),$("#editCelestialObject1").attr("disabled","disabled"),$("#editAngle1Id").removeAttr("disabled")):($("#editSelectFirstCelestialObject").attr("checked","checked"),$("#editCelestialObject1").val(t[0].CelestialObjectName1),$("#editCelestialObject1Id").val(t[0].CelestialObjectId1),$("#editCelestialObject1Selected").val(t[0].CelestialObjectName1),$("#editAngle1Id").attr("disabled","disabled"));$("#editAspectInterpretationTypeId2").val(t[0].AspectInterpretationTypeId2);IsNullOrUndefined(t[0].CelestialObjectId2)?IsNullOrUndefined(t[0].AngleId2)||($("#editSelectSecondChartAngle").attr("checked","checked"),$("#editAngle2Id").val(t[0].AngleId2),$("#editCelestialObject2").attr("disabled","disabled"),$("#editAngle2Id").removeAttr("disabled")):($("#editSelectSecondCelestialObject").attr("checked","checked"),$("#editCelestialObject2").val(t[0].CelestialObjectName2),$("#editCelestialObject2Id").val(t[0].CelestialObjectId2),$("#editCelestialObject2Selected").val(t[0].CelestialObjectName2),$("#editAngle2Id").attr("disabled","disabled"));$("#editAspectId").val(t[0].AspectId);$("#editInterpretation").val(t[0].Interpretation);$("#editCitationUrl").val(t[0].CitationUrl)}).fail(function(n,t,i){var r=t+", "+i;console.log("Edit Load Failure: "+r);$("#editStatus").append($("<div/>").html(errorIcon+" Failed to get edit data.."))})}var t=!1,i;$(".celestial-object").autocomplete({source:function(n,t){$.getJSON("/AspectInterpretations/GetFullAutoComplete",{enteredTerm:n.term}).done(function(n){t($.map(n,function(n){return{id:n.CelestialObjectId,label:n.CelestialObjectName,value:n.CelestialObjectName}}))}).fail(function(){console.log("AutoComplete Failed.")})},minLength:2,select:function(n,t){var i="#"+$(this).attr("id")+"Id",r="#"+$(this).attr("id")+"Selected";t.item?($(i).val(t.item.id),$(r).val(t.item.value)):($(i).val(""),$(r).val($(this).val()))}});i=$("#listingLoading").hide();$(document).ajaxStart(function(){t===!0&&($("#listingBody").empty(),i.show())}).ajaxStop(function(){i.hide();t=!1});n.GetAspectInterpretationListing=r;n.OpenCreateForm=c;n.OpenEditForm=l;n.OpenDeleteForm=a;$("#confirmAspectInterpretationDelete").click(function(){var n=$.post("/AspectInterpretations/ConfirmDeleteOfAspectInterpretation",{aspectInterpretationId:$("#deleteAspectInterpretationId").val()}).done(function(){$("#status").html(successIcon+" Aspect Interpretation deleted successfully.");$("#deleteAspectInterpretationModal").modal("hide");t=!0;$("#listingBody").empty();i.show();$.when(r(parseInt($("#pageNumber").val()),parseInt($("#resultsPerPage").val()))).done(function(){i.show();t=!1})}).fail(function(n,t,i){var r=t+", "+i;console.log("Delete Load Failure: "+r);$("#status").append($("<div/>").html(errorIcon+" Failed to delete Aspect Interpretation."))})});n.SetUpAspectInterpretationDropdowns=f;n.SetUpAspectDropdown=e;n.SetUpAngleDropdown=o;n.SetUpIdsForEntry=u;$("#createSelectFirstCelestialObject").click(function(){$("#createAngle1Id").attr("disabled","disabled");$("#createCelestialObject1").removeAttr("disabled")});$("#createSelectFirstChartAngle").click(function(){$("#createAngle1Id").removeAttr("disabled");$("#createCelestialObject1").val("").attr("disabled","disabled");$("#createCelestialObject1Id").empty();$("#createCelestialObject1Selected").empty()});$("#createSelectSecondCelestialObject").click(function(){$("#createAngle2Id").attr("disabled","disabled");$("#createCelestialObject2").removeAttr("disabled")});$("#createSelectSecondChartAngle").click(function(){$("#createAngle2Id").removeAttr("disabled");$("#createCelestialObject2").val("").attr("disabled","disabled");$("#createCelestialObject2Id").empty();$("#createCelestialObject2Selected").empty()});$("#editSelectFirstCelestialObject").click(function(){$("#editAngle1Id").attr("disabled","disabled");$("#editCelestialObject1").removeAttr("disabled")});$("#editSelectFirstChartAngle").click(function(){$("#editAngle1Id").removeAttr("disabled");$("#editCelestialObject1").val("").attr("disabled","disabled");$("#editCelestialObject1Id").empty();$("#editCelestialObject1Selected").empty()});$("#editSelectSecondCelestialObject").click(function(){$("#editAngle2Id").attr("disabled","disabled");$("#editCelestialObject2").removeAttr("disabled")});$("#editSelectSecondChartAngle").click(function(){$("#editAngle2Id").removeAttr("disabled");$("#editCelestialObject2").val("").attr("disabled","disabled");$("#editCelestialObject2Id").empty();$("#editCelestialObject2Selected").empty()});$("#confirmAspectInterpretationCreate").click(function(){var n=u($("#createAspectInterpretationTypeId1").val(),$("#createCelestialObject1Id").val(),$("input[name=createFirstAspectSelection]:checked").val()==="celestialObject1"?!0:!1,$("#createAngle1Id").val(),$("input[name=createFirstAspectSelection]:checked").val()==="angle1"?!0:!1,$("#createAspectInterpretationTypeId2").val(),$("#createCelestialObject2Id").val(),$("input[name=createSecondAspectSelection]:checked").val()==="celestialObject2"?!0:!1,$("#createAngle2Id").val(),$("input[name=createSecondAspectSelection]:checked").val()==="angle2"?!0:!1),a;if(n===null){$("#status").html(errorIcon+" An impossible error occured, but we have this message anyways.");return}var c=n[0],f=n[1],o=n[2],l=n[3],e=n[4],h=n[5];if(c===1&&l===1&&(!IsNullOrUndefined(f)&&!IsNullOrUndefined(e)&&f===e||!IsNullOrUndefined(o)&&!IsNullOrUndefined(h)&&o===h)){$("#createStatus").html(errorIcon+" Impossible aspect: An object or angle in a natal chart cannot aspect itself.");return}if(f===1&&e===5){$("#createStatus").html(errorIcon+" Impossible aspect: Sun and Earth cannot aspect each other in any chart yet.  Try again when we colonize Mars.");return}a=$.post("/AspectInterpretations/CreateNewAspectInterpretation",{aspectInterpretationTypeId1:c,celestialObjectId1:f,angleId1:o,aspectId:$("#createAspectId").val(),aspectInterpretationTypeId2:l,celestialObjectId2:e,angleId2:h,interpretation:$("#createInterpretation").val(),citationUrl:$("#createCitationUrl").val()}).done(function(n){n==="Success"?($("#status").html(successIcon+" New interpretation entered successfully."),s(),$("#createAspectInterpretationModal").modal("hide"),t=!0,$("#listingBody").empty(),i.show(),$.when(r(parseInt($("#pageNumber").val()),parseInt($("#resultsPerPage").val()))).done(function(){i.show();t=!1})):$("#createStatus").html(errorIcon+" Failed to enter new Interpretation.<br />"+n)}).fail(function(n,t,i){var r=t+", "+i;console.log("New Interpretation failure: "+r);$("#createStatus").html(errorIcon+" Failed to enter new Interpretation.")})});$("#confirmAspectInterpretationEdit").click(function(){var n=u($("#editAspectInterpretationTypeId1").val(),$("#editCelestialObject1Id").val(),$("input[name=editFirstAspectSelection]:checked").val()==="celestialObject1"?!0:!1,$("#editAngle1Id").val(),$("input[name=editFirstAspectSelection]:checked").val()==="angle1"?!0:!1,$("#editAspectInterpretationTypeId2").val(),$("#editCelestialObject2Id").val(),$("input[name=editSecondAspectSelection]:checked").val()==="celestialObject2"?!0:!1,$("#editAngle2Id").val(),$("input[name=editSecondAspectSelection]:checked").val()==="angle2"?!0:!1),l;if(n===null){$("#editStatus").html(errorIcon+" An impossible error occured, but we have this message anyways.");return}var h=n[0],f=n[1],e=n[2],c=n[3],o=n[4],s=n[5];if(h===1&&c===1&&(f===o||!IsNullOrUndefined(e)&&!IsNullOrUndefined(s)&&e===s)){$("#editStatus").html(errorIcon+" Impossible aspect: An object or angle in a natal chart cannot aspect itself.");return}if(f===1&&o===5){$("#editStatus").html(errorIcon+" Impossible aspect: Sun and Earth cannot aspect each other in any chart yet.  Try again when we colonize Mars.");return}l=$.post("/AspectInterpretations/UpdateAspectInterpretation",{aspectInterpretationId:$("#editAspectInterpretationId").val(),aspectInterpretationTypeId1:h,celestialObjectId1:f,angleId1:e,aspectId:$("#editAspectId").val(),aspectInterpretationTypeId2:c,celestialObjectId2:o,angleId2:s,interpretation:$("#editInterpretation").val(),citationUrl:$("#editCitationUrl").val()}).done(function(n){n==="Success"?($("#status").html(successIcon+" Aspect interpretation updated successfully."),$("#editAspectInterpretationModal").modal("hide"),t=!0,$("#listingBody").empty(),i.show(),$.when(r(parseInt($("#pageNumber").val()),parseInt($("#resultsPerPage").val()))).done(function(){i.show();t=!1})):$("#editStatus").html(errorIcon+" Failed to update Interpretation.<br />"+n)}).fail(function(n,t,i){var r=t+", "+i;console.log("Interpretation Update Failure: "+r);$("#editStatus").html(errorIcon+" Failed to update Interpretation.")})});n.ResetCreateForm=s;n.GetEditData=h;$("#resultsPerPage").change(function(){r(1,parseInt($("#resultsPerPage").val()))});$("#pageNumber").change(function(){r(parseInt($("#pageNumber").val()),parseInt($("#resultsPerPage").val()))});$(document).ready(function(){r(1,10);f();e();o();$("#createAngle1Id").attr("disabled","disabled");$("#createAngle2Id").attr("disabled","disabled")})})(AspectInterpretations||(AspectInterpretations={}));
//# sourceMappingURL=aspect-interpretations.min.js.map
