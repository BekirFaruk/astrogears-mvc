var EnteredCharts;(function(n){"use strict";function r(n,i){t=!0;$.ajaxSetup({cache:!1});var r=$.getJSON("/EnteredCharts/GetEnteredChartsListing",{pageNum:n,entriesPerPage:i}).done(function(t){$.each(t[0],function(n,t){var i=$("<tr/>");i.append($("<td/>").html(t.SubjectName));i.append($("<td/>").html(t.SubjectLocation));i.append($("<td/>").html(t.OriginDateTimeString));i.append($("<td/>").html(t.ChartTypeName));i.append($("<td/>").append($('<a href="#" onclick="EnteredCharts.OpenEditForm('+t.EnteredChartId+');return false;" title="Edit Entered Chart Data"/>').append('<span class="fa fa-edit"/>').append(" Edit")).append($("<br/>")).append($('<a href="/EnteredCharts/Details/'+t.EnteredChartId+'" title="Details"/>').append('<span class="fa fa-search"/>').append(" Details")).append($("<br/>")).append($('<a href="/EnteredCharts/Transits/'+t.EnteredChartId+'" title="Transits"/>').append('<span class="fa fa-arrows-alt"/>').append(" Transits")).append($("<br/>")).append($('<a href="/EnteredCharts/Synastry/'+t.EnteredChartId+'" title="Synastry"/>').append('<span class="fa fa-star-half-o"/>').append(" Synastry")).append($("<br/>")).append($('<a href="#" onclick="EnteredCharts.OpenDeleteForm('+t.EnteredChartId+');return false;" title="Delete Entered Chart"/>').append('<span class="fa fa-remove error"/>').append($('<span class="error"/>').html(" Delete"))));$("#listingBody").append(i)});$("#pageNumber").empty();$("#totalPages").text(t[1]);for(var i=1;i<=parseInt(t[1],10);i++)$("#pageNumber").append($(i===n?'<option selected="selected"/>':"<option/>").val(i.toString()).text(i.toString()))}).fail(function(n,t,i){var r=t+", "+i;console.log("Entered Charts listing failure: "+r);$("#status").html(errorIcon+" Error: Cannot retrieve Entered Charts Listing")});return $.ajaxSetup({cache:!0}),r}function e(){$("#createEnteredChartModal").modal("show")}function o(n){$("#editEnteredChartModal").modal("show");u(n)}function u(n){$.getJSON("/EnteredCharts/GetEnteredChartForEdit",{id:n}).done(function(t){$("#editEnteredChartId").val(n.toString());$("#editSubjectName").val(t[0].SubjectName);$("#editSubjectLocation").val(t[0].SubjectLocation);$("#editOriginDateTime").val(t[0].OriginDateTime);t[0].OriginDateTimeUnknown?$("#editOriginDateTimeUnknown").prop("checked",!0):$("#editOriginDateTimeUnknown").prop("checked",!1);$("#editChartTypeId").val(t[0].ChartTypeId)}).fail(function(n,t,i){var r=t+", "+i;console.log("Edit Load Failure: "+r);$("#editStatus").append($("<div/>").html(errorIcon+" Failed to get edit data."))})}function s(n){$("#deleteEnteredChartModal").modal("show");$.getJSON("/EnteredCharts/GetEnteredChartForDelete",{id:n}).done(function(n){$("#deleteEnteredChartId").val(n[0].EnteredChartId.toString());$("#deleteSubjectName").html(n[0].SubjectName);$("#deleteSubjectLocation").html(n[0].SubjectLocation);$("#deleteOriginDateTime").html(n[0].OriginDateTimeString);$("#deleteChartType").html(n[0].ChartTypeName);$("#deleteChartObjectsCount").html(n[0].NumberOfChartObjects.toString())}).fail(function(n,t,i){var r=t+", "+i;console.log("Delete Load Failure: "+r);$("#status").append($("<div/>").html(errorIcon+" Failed to get delete data."))})}function f(){$.getJSON("/EnteredCharts/GetChartTypesList").done(function(n){$.each([$("#createChartTypeId"),$("#editChartTypeId")],function(t,i){$.each(n,function(n,t){i.append($('<option value="'+t.ChartTypeId+'"'+(n===0?' selected="selected"':"")+"/>").html(t.ChartTypeName))})})}).fail(function(n,t,i){var r=t+", "+i;console.log("Chart Type List failure.: "+r);$("#status").append($("<div/>").html(errorIcon+" Failed to retrieve Chart Type List Types."))})}var t=!1,i=$("#listingLoading").hide();$(document).ajaxStart(function(){t===!0&&($("#listingBody").empty(),i.show())}).ajaxStop(function(){i.hide();t=!1});n.GetEnteredChartsListing=r;n.OpenCreateForm=e;n.OpenEditForm=o;n.GetEditData=u;n.OpenDeleteForm=s;$("#confirmEnteredChartDelete").click(function(){$.post("/EnteredCharts/ConfirmDeleteOfEnteredChart",{enteredChartId:$("#deleteEnteredChartId").val()}).done(function(){$("#status").html(successIcon+" Entered Chart deleted successfully.");$("#deleteEnteredChartModal").modal("hide");t=!0;$("#listingBody").empty();i.show();$.when(r(parseInt($("#pageNumber").val(),10),parseInt($("#resultsPerPage").val(),10))).done(function(){i.show();t=!1})}).fail(function(n,t,i){var r=t+", "+i;console.log("Delete Load Failure: "+r);$("#deleteStatus").append($("<div/>").html(errorIcon+" Failed to delete Entered Chart."))})});$("#confirmEnteredChartEdit").click(function(){$.post("/EnteredCharts/UpdateEnteredChart",{enteredChartId:$("#editEnteredChartId").val(),subjectName:$("#editSubjectName").val(),subjectLocation:$("#editSubjectLocation").val(),originDateTime:$("#editOriginDateTime").val(),originDateTimeUnknown:$("#editOriginDateTimeUnknown").is(":checked"),chartTypeId:$("#editChartTypeId").val()}).done(function(n){n==="Success"?($("#status").html(successIcon+" Entered Chart updated successfully."),$("#editEnteredChartModal").modal("hide"),t=!0,$("#listingBody").empty(),i.show(),$.when(r(parseInt($("#pageNumber").val(),10),parseInt($("#resultsPerPage").val(),10))).done(function(){i.show();t=!1})):$("#editStatus").html(errorIcon+" Failed to update Entered Chart.<br />"+n)}).fail(function(n,t,i){var r=t+", "+i;console.log("Entered Chart Update Failure: "+r);$("#editStatus").html(errorIcon+" Failed to update Entered Chart.")})});$("#confirmEnteredChartCreate").click(function(){$.post("/EnteredCharts/CreateNewEnteredChart",{subjectName:$("#createSubjectName").val(),subjectLocation:$("#createSubjectLocation").val(),originDateTime:$("#createOriginDateTime").val(),originDateTimeUnknown:$("#createOriginDateTimeUnknown").is(":checked"),chartTypeId:$("#createChartTypeId").val()}).done(function(n){n==="Success"?($("#status").html(successIcon+" New Entered Chart created successfully."),$("#createEnteredChartModal").modal("hide"),t=!0,$("#listingBody").empty(),i.show(),$.when(r(parseInt($("#pageNumber").val(),10),parseInt($("#resultsPerPage").val(),10))).done(function(){i.show();t=!1})):$("#createStatus").html(errorIcon+" Failed to create new Entered Chart.<br />"+n)}).fail(function(n,t,i){var r=t+", "+i;console.log("Entered Chart Creation Failure: "+r);$("#createStatus").html(errorIcon+" Failed to create new Entered Chart.")})});n.SetUpChartTypeDropdown=f;$("#resultsPerPage").change(function(){r(1,parseInt($("#resultsPerPage").val(),10))});$("#pageNumber").change(function(){r(parseInt($("#pageNumber").val(),10),parseInt($("#resultsPerPage").val(),10))});$(document).ready(function(){r(1,10);f()})})(EnteredCharts||(EnteredCharts={}));
//# sourceMappingURL=entered-charts.min.js.map
